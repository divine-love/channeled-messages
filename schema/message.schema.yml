$schema: "https://json-schema.org/draft/2020-12/schema"
$title: Divine Love Message
$type: object
$comment: |
  Apply this schema to the YAML front matter of each message Markdown file.
  Only a few fields are required; everything else is optional and may be omitted.

  ⚠️  Each message must have a globally unique ID following the pattern YYYY-MM-DD-Medium-Spirit.
  If multiple messages are received from the same Spirit and Medium on the same day,
  append a numeric suffix (-2, -3, etc.) to ensure uniqueness.
  Example: 2015-11-30-AF-Jesus and 2015-11-30-AF-Jesus-2.

  The message text itself belongs **below** the front matter in Markdown format.

required:
  - id
  - title
  - date
  - spirit
  - medium
  - location

properties:
  id:
    type: string
    pattern: "^[0-9]{4}-[0-9]{2}-[0-9]{2}-[A-Z]{2}-[A-Za-z]+(-[0-9]+)?$"
    description: >
      Unique message identifier following the pattern:
      **YYYY-MM-DD-Medium-Spirit**
      Example: `2015-11-30-AF-Jesus`
      If more than one message is received by the same **Spirit** and **Medium**
      on the same date, append a numeric suffix to maintain uniqueness:
      `-2` for the second message, `-3` for the third, etc.

  title:
    type: string
    minLength: 1

  description:
    type: string
    description: 1–2 sentence summary for listings and previews

  date:
    type: string
    format: date
    description: ISO date (YYYY-MM-DD) of the message

  spirit:
    type: string
    description: Slug referencing a record in data/spirits/*.yml (e.g., "jesus", "augustine")

  medium:
    type: string
    description: Slug referencing a record in data/people/*.yml (e.g., "al-fike")

  location:
    type: object
    required: [city, country]
    properties:
      city:
        type: string
      region:
        type: string
        description: Optional state/province/region
      country:
        type: string
      place_name:
        type: string
        description: Optional freeform (e.g., venue, home, or center name)

  message_type:
    type: array
    description: >
      Message classification(s). One or more of the following:
      `Blessing`, `Guidance`, `Teaching`.
    items:
      type: string
      enum: [Blessing, Guidance, Teaching]
    uniqueItems: true
    minItems: 1

  language:
    type: string
    description: Language of this file in BCP-47 code (e.g., "en", "pt-BR")
    default: "en"

  original_language:
    type: string
    description: Original language if this file is a translation

  primary_subjects:
    type: array
    description: Must reference your “Hierarchy of Subjects” primary categories (slugs or names)
    items: { type: string }
    uniqueItems: true

  secondary_subjects:
    type: array
    description: Optional supporting topics (slugs or names)
    items: { type: string }
    uniqueItems: true

  tags:
    type: array
    description: Freeform tags for search and curation
    items: { type: string }
    uniqueItems: true

  cross_references:
    type: array
    description: IDs of related messages (e.g., 2015-10-12-AF-John)
    items:
      type: string

  theme_clusters:
    type: array
    description: Optional higher-level themes (e.g., “Centers of Light”, “Soul Mind vs Material Mind”)
    items: { type: string }
    uniqueItems: true

  series:
    type: object
    description: Optional grouping for retreats or message series
    properties:
      name: { type: string }
      part: { type: integer, minimum: 1 }
      total_parts: { type: integer, minimum: 1 }

  canonical_url:
    type: string
    format: uri
    description: >
      Optional link to the message’s primary or authoritative version on an external website.
      Example: https://divinelovesanctuary.com/messages/2015-12-27-augustine-awakening-of-the-soul-mind/
      Use this field to indicate where the message was originally published or hosted.
      Leave blank for unpublished or repository-original messages.

  source:
    type: object
    description: Provenance of the transcript
    properties:
      recorder: { type: string }
      transcription_notes: { type: string }
      rights:
        type: string
        description: Short rights note (e.g., “CC BY-NC-ND 4.0”)

  media:
    type: object
    description: Optional associated media for the message (e.g., audio recording)
    properties:
      audio:
        type: object
        description: Optional link to an audio recording of the message
        properties:
          url:
            type: string
            format: uri
            description: Direct or embedded URL to the audio file
          format:
            type: string
            description: File format or container (e.g., "mp3", "wav", "m4a")
          duration:
            type: string
            description: Optional human-readable length (e.g., "12:34")
        required: [url]

  translations:
    type: array
    description: Links to other language versions in your repo
    items:
      type: object
      required: [language, path]
      properties:
        language: { type: string, description: BCP-47 code }
        path: { type: string, description: Repo-relative path to the translated file }

  notes:
    type: string
    description: Curator notes (internal)

additionalProperties: false
